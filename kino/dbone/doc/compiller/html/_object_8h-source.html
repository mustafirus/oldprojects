<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>compiler: P:/dbone/compiler/Object.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">P:</a>&nbsp;/&nbsp;<a class="el" href="dir_000001.html">dbone</a>&nbsp;/&nbsp;<a class="el" href="dir_000002.html">compiler</a></div>
<h1>Object.h</h1><a href="_object_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="preprocessor">#pragma once</span>
00002 <span class="preprocessor"></span>
00003 <span class="preprocessor">#include "my_vector.h"</span>
00004 <span class="preprocessor">#include "my_pair.h"</span>
00005 
<a name="l00010"></a><a class="code" href="class_component.html">00010</a> <span class="keyword">class </span><a class="code" href="class_component.html">Component</a> {
00011 <span class="keyword">protected</span>:
<a name="l00012"></a><a class="code" href="class_component.html#p0">00012</a>         string <a class="code" href="class_component.html#p0">_name</a>;
<a name="l00013"></a><a class="code" href="class_component.html#b0">00013</a>         <a class="code" href="class_component.html#b0">Component</a>(string name) : <a class="code" href="class_component.html#p0">_name</a>(name){};
<a name="l00014"></a><a class="code" href="class_component.html#b1">00014</a>         <a class="code" href="class_component.html#b1">~Component</a>(){};
00015 <span class="keyword">public</span>:
00016         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="class_component.html#a0">tostring</a>(string&amp; str) = 0;
00017 };
00018 
<a name="l00019"></a><a class="code" href="class_field.html">00019</a> <span class="keyword">class </span><a class="code" href="class_field.html">Field</a> : <span class="keyword">public</span> <a class="code" href="class_component.html">Component</a>{
<a name="l00020"></a><a class="code" href="class_field.html#r0">00020</a>         string <a class="code" href="class_field.html#r0">_domain</a>;
00021 <span class="keyword">public</span>:
<a name="l00022"></a><a class="code" href="class_field.html#a0">00022</a>         <a class="code" href="class_field.html#a0">Field</a>(string domain, string name) : <a class="code" href="class_field.html#r0">_domain</a>(<a class="code" href="_dict_parser_8cpp.html#a4">domain</a>), <a class="code" href="class_component.html">Component</a>(_name){};
<a name="l00023"></a><a class="code" href="class_field.html#a1">00023</a>         <a class="code" href="class_field.html#a1">~Field</a>(){};
<a name="l00024"></a><a class="code" href="class_field.html#a2">00024</a>         <span class="keywordtype">void</span> <a class="code" href="class_field.html#a2">tostring</a>(string&amp; str){
00025                 str &lt;&lt; <span class="stringliteral">"\t"</span> &lt;&lt; <a class="code" href="class_field.html#r0">_domain</a> &lt;&lt; <span class="stringliteral">" "</span> &lt;&lt; _name &lt;&lt; <span class="stringliteral">";\n"</span>;
00026         };
00027 };
00028 
<a name="l00029"></a><a class="code" href="class_method.html">00029</a> <span class="keyword">class </span><a class="code" href="class_method.html">Method</a> : <span class="keyword">public</span> <a class="code" href="class_component.html">Component</a>{
<a name="l00030"></a><a class="code" href="class_method.html#r0">00030</a>         string <a class="code" href="class_method.html#r0">_body</a>;
00031 <span class="keyword">public</span>:
<a name="l00032"></a><a class="code" href="class_method.html#a0">00032</a>         <a class="code" href="class_method.html#a0">Method</a>(string name, string body) : <a class="code" href="class_component.html">Component</a>(name), <a class="code" href="class_method.html#r0">_body</a>(body) {};
00033         <a class="code" href="class_method.html#a1">~Method</a>();
<a name="l00034"></a><a class="code" href="class_method.html#a2">00034</a>         <span class="keywordtype">void</span> <a class="code" href="class_method.html#a2">tostring</a>(string&amp; str){
00035                 str &lt;&lt; <span class="stringliteral">"\t"</span> &lt;&lt; _name &lt;&lt; <span class="stringliteral">"(){{c++\n"</span> &lt;&lt; <a class="code" href="class_method.html#r0">_body</a> &lt;&lt; <span class="stringliteral">"\n\t}};\n"</span>;
00036         };
00037 };
00038 
<a name="l00039"></a><a class="code" href="class_function.html">00039</a> <span class="keyword">class </span><a class="code" href="class_function.html">Function</a> : <span class="keyword">public</span> <a class="code" href="class_component.html">Component</a>{
<a name="l00040"></a><a class="code" href="class_function.html#r0">00040</a>         string <a class="code" href="class_function.html#r0">_domain</a>;
<a name="l00041"></a><a class="code" href="class_function.html#r1">00041</a>         string <a class="code" href="class_function.html#r1">_body</a>;
00042 <span class="keyword">public</span>:
<a name="l00043"></a><a class="code" href="class_function.html#a0">00043</a>         <a class="code" href="class_function.html#a0">Function</a>(string domain, string name, string body) : <a class="code" href="class_function.html#r0">_domain</a>(<a class="code" href="_dict_parser_8cpp.html#a4">domain</a>), <a class="code" href="class_component.html">Component</a>(_name), <a class="code" href="class_function.html#r1">_body</a>(body){};
<a name="l00044"></a><a class="code" href="class_function.html#a1">00044</a>         <a class="code" href="class_function.html#a1">~Function</a>(){};
<a name="l00045"></a><a class="code" href="class_function.html#a2">00045</a>         <span class="keywordtype">void</span> <a class="code" href="class_function.html#a2">tostring</a>(string&amp; str){
00046                 str &lt;&lt; <span class="stringliteral">"\t"</span> &lt;&lt; <a class="code" href="class_function.html#r0">_domain</a> &lt;&lt; <span class="stringliteral">" "</span> &lt;&lt; _name &lt;&lt; <span class="stringliteral">"(){{c++\n"</span> &lt;&lt; <a class="code" href="class_function.html#r1">_body</a> &lt;&lt; <span class="stringliteral">"\n\t}};\n"</span>;
00047         };
00048 };
00049 
<a name="l00054"></a><a class="code" href="class_object.html">00054</a> <span class="keyword">class </span><a class="code" href="class_object.html">Object</a> {
<a name="l00055"></a><a class="code" href="class_object.html#y0">00055</a>         <span class="keyword">typedef</span> pair&lt;string, string&gt; <a class="code" href="class_object.html#y0">Param</a>;
<a name="l00056"></a><a class="code" href="class_object.html#y1">00056</a>         <span class="keyword">typedef</span> vector&lt; Param &gt; <a class="code" href="class_object.html#y1">Params</a>;
<a name="l00057"></a><a class="code" href="class_object.html#r0">00057</a>         string          <a class="code" href="class_object.html#r0">_name</a>;
<a name="l00058"></a><a class="code" href="class_object.html#r1">00058</a>         string          <a class="code" href="class_object.html#r1">_parent</a>;        
<a name="l00059"></a><a class="code" href="class_object.html#r2">00059</a>         <a class="code" href="class_object.html">Object</a>*         <a class="code" href="class_object.html#r2">_parent_obj</a>;    
<a name="l00060"></a><a class="code" href="class_object.html#r3">00060</a>         <a class="code" href="class_object.html#y1">Params</a>          <a class="code" href="class_object.html#r3">_params</a>;
<a name="l00061"></a><a class="code" href="class_object.html#y2">00061</a>         <span class="keyword">typedef</span> vector&lt; Component* &gt; <a class="code" href="class_object.html#y2">Components</a>;
<a name="l00062"></a><a class="code" href="class_object.html#r4">00062</a>         <a class="code" href="class_object.html#y2">Components</a>      <a class="code" href="class_object.html#r4">_components</a>;
00063 
00064 
00065 
00066 <span class="keyword">public</span>:
<a name="l00067"></a><a class="code" href="class_object.html#w3">00067</a>         <span class="keyword">enum</span> <a class="code" href="class_object.html#w3">Type</a> { <a class="code" href="class_object.html#w3w0">domain</a> = 1, <a class="code" href="class_object.html#w3w1">table</a> = 2, <a class="code" href="class_object.html#w3w2">view</a> = 3} _type;
00068         
<a name="l00069"></a><a class="code" href="class_object.html#a0">00069</a>         <a class="code" href="class_object.html#a0">Object</a>( Type type, string name, string parent ) : <a class="code" href="class_object.html#o0">_type</a>(type),  <a class="code" href="class_object.html#r0">_name</a>(name), <a class="code" href="class_object.html#r1">_parent</a>(parent), <a class="code" href="class_object.html#r2">_parent_obj</a>(NULL) {};
<a name="l00070"></a><a class="code" href="class_object.html#a1">00070</a>         <a class="code" href="class_object.html#a1">~Object</a>(){};
<a name="l00071"></a><a class="code" href="class_object.html#a2">00071</a>         string <a class="code" href="class_object.html#a2">name</a>()   { <span class="keywordflow">return</span> <a class="code" href="class_object.html#r0">_name</a>; }
<a name="l00072"></a><a class="code" href="class_object.html#a3">00072</a>         string <a class="code" href="class_object.html#a3">parent</a>() { <span class="keywordflow">return</span> <a class="code" href="class_object.html#r1">_parent</a>; }
<a name="l00073"></a><a class="code" href="class_object.html#a4">00073</a>         string <a class="code" href="class_object.html#a4">typestr</a>(){
00074                 <span class="keywordflow">switch</span>(<a class="code" href="class_object.html#o0">_type</a>){
00075                         <span class="keywordflow">case</span> <a class="code" href="class_object.html#w3w0">domain</a>:
00076                                 <span class="keywordflow">return</span> <span class="stringliteral">"domain"</span>;
00077                         <span class="keywordflow">case</span> <a class="code" href="class_object.html#w3w1">table</a>:
00078                                 <span class="keywordflow">return</span> <span class="stringliteral">"table"</span>;
00079                         <span class="keywordflow">case</span> <a class="code" href="class_object.html#w3w2">view</a>:
00080                                 <span class="keywordflow">return</span> <span class="stringliteral">"view"</span>;
00081                         <span class="keywordflow">default</span>:
00082                                 ASSERT(0);
00083                                 <span class="keywordflow">return</span> <span class="stringliteral">""</span>;
00084                 }
00085         };
00086 
<a name="l00087"></a><a class="code" href="class_object.html#a5">00087</a>         <span class="keywordtype">void</span> <a class="code" href="class_object.html#a5">addParam</a>(string name, string val){
00088                 <a class="code" href="class_object.html#r3">_params</a>.add( <a class="code" href="class_object.html#y0">Param</a>( name, val ) );
00089         }
00090 
<a name="l00091"></a><a class="code" href="class_object.html#a6">00091</a>         <span class="keywordtype">void</span> <a class="code" href="class_object.html#a6">addComponent</a>(<a class="code" href="class_component.html">Component</a>* pcom){
00092                 <a class="code" href="class_object.html#r4">_components</a>.add( pcom );
00093         }
00094 
<a name="l00095"></a><a class="code" href="class_object.html#a7">00095</a>         <span class="keywordtype">void</span> <a class="code" href="class_object.html#a7">tostring</a>( string&amp; str ){
00096                 str &lt;&lt; <a class="code" href="class_object.html#a4">typestr</a>() &lt;&lt; <span class="stringliteral">" "</span> &lt;&lt; <a class="code" href="class_object.html#a2">name</a>();
00097                 <span class="keywordflow">if</span> (<a class="code" href="class_object.html#r2">_parent_obj</a>){
00098                         str &lt;&lt; <span class="stringliteral">" : "</span> &lt;&lt; <a class="code" href="class_object.html#r2">_parent_obj</a>-&gt;<a class="code" href="class_object.html#a2">name</a>();
00099                 }
00100                 <span class="keywordflow">if</span> (<a class="code" href="class_object.html#r3">_params</a>.count()){
00101                         str &lt;&lt; <span class="stringliteral">"[\n\t"</span> &lt;&lt; <a class="code" href="class_object.html#r3">_params</a>[0].<a class="code" href="class_object.html#a2">name</a>() &lt;&lt; <span class="stringliteral">" =&gt; "</span> &lt;&lt; <a class="code" href="class_object.html#r3">_params</a>[0].val() ;
00102                         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 1; i &lt; <a class="code" href="class_object.html#r3">_params</a>.count(); i++ ){
00103                                 str &lt;&lt; <span class="stringliteral">",\n\t"</span> &lt;&lt; <a class="code" href="class_object.html#r3">_params</a>[i].<a class="code" href="class_object.html#a2">name</a>() &lt;&lt; <span class="stringliteral">" =&gt; "</span> &lt;&lt; <a class="code" href="class_object.html#r3">_params</a>[i].val() ;
00104                         }
00105                         str &lt;&lt; <span class="stringliteral">"\n]"</span>;
00106                 }
00107                 str &lt;&lt; <span class="stringliteral">"{\n"</span>;
00108                 <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="class_object.html#r4">_components</a>.count(); i++ ){
00109                         <a class="code" href="class_object.html#r4">_components</a>[i]-&gt;<a class="code" href="class_object.html#a7">tostring</a>(str);
00110                 }
00111                 str &lt;&lt; <span class="stringliteral">"\n}"</span>;
00112         }
00113 };
00114 
00115 
<a name="l00116"></a><a class="code" href="class_dict.html">00116</a> <span class="keyword">class </span><a class="code" href="class_dict.html">Dict</a>{
<a name="l00117"></a><a class="code" href="class_dict.html#y0">00117</a>         <span class="keyword">typedef</span> vector&lt;Object*&gt; <a class="code" href="class_dict.html#y0">Objects</a>;
00118 
<a name="l00119"></a><a class="code" href="class_dict.html#r0">00119</a>         <a class="code" href="class_dict.html#y0">Objects</a>         <a class="code" href="class_dict.html#r0">_objects</a>;
<a name="l00120"></a><a class="code" href="class_dict.html#r1">00120</a>         <a class="code" href="class_object.html">Object</a>*         <a class="code" href="class_dict.html#r1">_pObj</a>;
00121 
<a name="l00122"></a><a class="code" href="class_dict.html#d0">00122</a>         <span class="keywordtype">void</span> <a class="code" href="class_dict.html#d0">beginObject</a>(Object::Type type, string name, string parent){
00123                 <a class="code" href="class_dict.html#r1">_pObj</a> = <span class="keyword">new</span> <a class="code" href="class_object.html">Object</a>( type, name, parent);
00124         }
<a name="l00125"></a><a class="code" href="class_dict.html#d1">00125</a>         <span class="keywordtype">void</span> <a class="code" href="class_dict.html#d1">endObject</a>(){
00126                 <a class="code" href="class_dict.html#r0">_objects</a>.add(<a class="code" href="class_dict.html#r1">_pObj</a>);
00127         }
<a name="l00128"></a><a class="code" href="class_dict.html#d2">00128</a>         <a class="code" href="class_object.html">Object</a>* <a class="code" href="class_dict.html#d2">object</a>(){ <span class="keywordflow">return</span> <a class="code" href="class_dict.html#r1">_pObj</a>; }
<a name="l00129"></a><a class="code" href="class_dict.html#d3">00129</a>         <a class="code" href="class_object.html">Object</a>* <a class="code" href="class_dict.html#d3">operator-&gt;</a>(){ <span class="keywordflow">return</span> <a class="code" href="class_dict.html#r1">_pObj</a>; }
00130 };
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Jan 12 11:24:53 2005 for compiler by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.1 </small></address>
</body>
</html>
